<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>服务端 | Mix Space</title>
    <meta name="description" content="An alternative personal space.">
    <link rel="stylesheet" href="/assets/style.35aa4f89.css">
    <link rel="modulepreload" href="/assets/chunks/VPAlgoliaSearchBox.e5887ae1.js">
    <link rel="modulepreload" href="/assets/app.553a9922.js">
    <link rel="modulepreload" href="/assets/dev_server.md.eac0daca.lean.js">
    
    <link rel="icon" href="/favicon.svg" type="image/svg+xml">
  <script src="https://analyze.innei.ren/ramu.js" data-website-id="95c14b03-a569-4e9f-b1b3-d411bf8afaf0" async="true" defer="true" data-endpoint="ramu"></script>
  <meta property="og:title" content="Mix Space">
  <meta property="og:image" content="https://avatars.githubusercontent.com/u/63097751?s=200&amp;v=4">
  <link rel="dns-prefetch" href="https://fonts.gstatic.com">
  <link rel="preconnect" crossorigin="anonymous" href="https://fonts.gstatic.com">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&amp;display=swap">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Fira+Code&amp;display=swap">
  <script id="check-dark-light">(()=>{const e=localStorage.getItem("vitepress-theme-appearance"),a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-c2a530d9><!--[--><!--]--><!--[--><span tabindex="-1" data-v-491ce2fb></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-491ce2fb> Skip to content </a><!--]--><!----><header class="VPNav" data-v-c2a530d9 data-v-13729332><div class="VPNavBar has-sidebar" data-v-13729332 data-v-503f7c40><div class="container" data-v-503f7c40><div class="VPNavBarTitle has-sidebar" data-v-503f7c40 data-v-fe2af696><a class="title" href="/" data-v-fe2af696><!--[--><!--]--><!--[--><img class="VPImage logo" src="/favicon.svg" data-v-e637123b><!--]--><!--[-->Mix Space<!--]--><!--[--><!--]--></a></div><div class="content" data-v-503f7c40><!--[--><!--]--><div class="VPNavBarSearch search" data-v-503f7c40 style="--19cf051b:&#39;Meta&#39;;"><div id="docsearch"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg class="DocSearch-Search-Icon" width="20" height="20" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-503f7c40 data-v-c5ed54c1><span id="main-nav-aria-label" class="visually-hidden" data-v-c5ed54c1>Main Navigation</span><!--[--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-c5ed54c1 data-v-16b6e9a5><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-16b6e9a5><span class="text" data-v-16b6e9a5><!----> 介绍 <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="text-icon" data-v-16b6e9a5><path d="M12,16c-0.3,0-0.5-0.1-0.7-0.3l-6-6c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l5.3,5.3l5.3-5.3c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-6,6C12.5,15.9,12.3,16,12,16z"></path></svg></span></button><div class="menu" data-v-16b6e9a5><div class="VPMenu" data-v-16b6e9a5 data-v-21807583><div class="items" data-v-21807583><!--[--><!--[--><div class="VPMenuLink" data-v-21807583 data-v-f4cc9dd6><a class="VPLink link" href="/guide/" data-v-f4cc9dd6 data-v-eb60ede3><!--[-->介绍<!--]--><!----></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-c5ed54c1 data-v-16b6e9a5><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-16b6e9a5><span class="text" data-v-16b6e9a5><!----> 部署 <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="text-icon" data-v-16b6e9a5><path d="M12,16c-0.3,0-0.5-0.1-0.7-0.3l-6-6c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l5.3,5.3l5.3-5.3c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-6,6C12.5,15.9,12.3,16,12,16z"></path></svg></span></button><div class="menu" data-v-16b6e9a5><div class="VPMenu" data-v-16b6e9a5 data-v-21807583><div class="items" data-v-21807583><!--[--><!--[--><div class="VPMenuGroup" data-v-21807583 data-v-ef0807ee><p class="title" data-v-ef0807ee>Global</p><!--[--><!--[--><div class="VPMenuLink" data-v-ef0807ee data-v-f4cc9dd6><a class="VPLink link" href="/deploy/" data-v-f4cc9dd6 data-v-eb60ede3><!--[-->一键部署全站<!--]--><!----></a></div><!--]--><!--]--></div><!--]--><!--[--><div class="VPMenuGroup" data-v-21807583 data-v-ef0807ee><p class="title" data-v-ef0807ee>Server</p><!--[--><!--[--><div class="VPMenuLink" data-v-ef0807ee data-v-f4cc9dd6><a class="VPLink link" href="/deploy/index.html#%E9%83%A8%E7%BD%B2-core" data-v-f4cc9dd6 data-v-eb60ede3><!--[-->Core 部署<!--]--><!----></a></div><!--]--><!--]--></div><!--]--><!--[--><div class="VPMenuGroup" data-v-21807583 data-v-ef0807ee><p class="title" data-v-ef0807ee>Kami</p><!--[--><!--[--><div class="VPMenuLink" data-v-ef0807ee data-v-f4cc9dd6><a class="VPLink link" href="/deploy/index.html#%E9%83%A8%E7%BD%B2-kami" data-v-f4cc9dd6 data-v-eb60ede3><!--[-->Kami 部署<!--]--><!----></a></div><!--]--><!--]--></div><!--]--><!--[--><div class="VPMenuGroup" data-v-21807583 data-v-ef0807ee><p class="title" data-v-ef0807ee>Yun</p><!--[--><!--[--><div class="VPMenuLink" data-v-ef0807ee data-v-f4cc9dd6><a class="VPLink link" href="/deploy/" data-v-f4cc9dd6 data-v-eb60ede3><!--[-->Yun 部署(WIP)<!--]--><!----></a></div><!--]--><!--]--></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-c5ed54c1 data-v-16b6e9a5><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-16b6e9a5><span class="text" data-v-16b6e9a5><!----> 设置 <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="text-icon" data-v-16b6e9a5><path d="M12,16c-0.3,0-0.5-0.1-0.7-0.3l-6-6c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l5.3,5.3l5.3-5.3c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-6,6C12.5,15.9,12.3,16,12,16z"></path></svg></span></button><div class="menu" data-v-16b6e9a5><div class="VPMenu" data-v-16b6e9a5 data-v-21807583><div class="items" data-v-21807583><!--[--><!--[--><div class="VPMenuLink" data-v-21807583 data-v-f4cc9dd6><a class="VPLink link" href="/use/" data-v-f4cc9dd6 data-v-eb60ede3><!--[-->使用<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-21807583 data-v-f4cc9dd6><a class="VPLink link" href="/use/#后台设置" data-v-f4cc9dd6 data-v-eb60ede3><!--[-->后台设置<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-21807583 data-v-f4cc9dd6><a class="VPLink link" href="/use/#歌单听歌追番" data-v-f4cc9dd6 data-v-eb60ede3><!--[-->歌单<!--]--><!----></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-c5ed54c1 data-v-16b6e9a5><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-16b6e9a5><span class="text" data-v-16b6e9a5><!----> 帮助 <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="text-icon" data-v-16b6e9a5><path d="M12,16c-0.3,0-0.5-0.1-0.7-0.3l-6-6c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l5.3,5.3l5.3-5.3c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-6,6C12.5,15.9,12.3,16,12,16z"></path></svg></span></button><div class="menu" data-v-16b6e9a5><div class="VPMenu" data-v-16b6e9a5 data-v-21807583><div class="items" data-v-21807583><!--[--><!--[--><div class="VPMenuLink" data-v-21807583 data-v-f4cc9dd6><a class="VPLink link" href="/help/#构建" data-v-f4cc9dd6 data-v-eb60ede3><!--[-->构建<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-21807583 data-v-f4cc9dd6><a class="VPLink link" href="/help/#设置" data-v-f4cc9dd6 data-v-eb60ede3><!--[-->设置<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-21807583 data-v-f4cc9dd6><a class="VPLink link" href="/help/#重启" data-v-f4cc9dd6 data-v-eb60ede3><!--[-->重启<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-21807583 data-v-f4cc9dd6><a class="VPLink link" href="/help/#升级" data-v-f4cc9dd6 data-v-eb60ede3><!--[-->升级<!--]--><!----></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-c5ed54c1 data-v-16b6e9a5><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-16b6e9a5><span class="text" data-v-16b6e9a5><!----> 开发 <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="text-icon" data-v-16b6e9a5><path d="M12,16c-0.3,0-0.5-0.1-0.7-0.3l-6-6c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l5.3,5.3l5.3-5.3c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-6,6C12.5,15.9,12.3,16,12,16z"></path></svg></span></button><div class="menu" data-v-16b6e9a5><div class="VPMenu" data-v-16b6e9a5 data-v-21807583><div class="items" data-v-21807583><!--[--><!--[--><div class="VPMenuLink" data-v-21807583 data-v-f4cc9dd6><a class="VPLink link" href="/dev/frontend.html" data-v-f4cc9dd6 data-v-eb60ede3><!--[-->前端<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-21807583 data-v-f4cc9dd6><a class="VPLink link active" href="/dev/server.html" data-v-f4cc9dd6 data-v-eb60ede3><!--[-->服务端<!--]--><!----></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-503f7c40 data-v-87444e3b><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" aria-label="toggle dark mode" data-v-87444e3b data-v-2c4df1e4 data-v-21f70aaf><span class="check" data-v-21f70aaf><span class="icon" data-v-21f70aaf><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-2c4df1e4><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-2c4df1e4><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-503f7c40 data-v-52bd88f4 data-v-623b6953><!--[--><a class="VPSocialLink" href="https://github.com/mx-space" target="_blank" rel="noopener" data-v-623b6953 data-v-c50d0b43><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-503f7c40 data-v-fad8ddb0 data-v-16b6e9a5><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-16b6e9a5><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="icon" data-v-16b6e9a5><circle cx="12" cy="12" r="2"></circle><circle cx="19" cy="12" r="2"></circle><circle cx="5" cy="12" r="2"></circle></svg></button><div class="menu" data-v-16b6e9a5><div class="VPMenu" data-v-16b6e9a5 data-v-21807583><!----><!--[--><!--[--><!----><div class="group" data-v-fad8ddb0><div class="item appearance" data-v-fad8ddb0><p class="label" data-v-fad8ddb0>Appearance</p><div class="appearance-action" data-v-fad8ddb0><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" aria-label="toggle dark mode" data-v-fad8ddb0 data-v-2c4df1e4 data-v-21f70aaf><span class="check" data-v-21f70aaf><span class="icon" data-v-21f70aaf><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-2c4df1e4><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-2c4df1e4><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div></div></div><div class="group" data-v-fad8ddb0><div class="item social-links" data-v-fad8ddb0><div class="VPSocialLinks social-links-list" data-v-fad8ddb0 data-v-623b6953><!--[--><a class="VPSocialLink" href="https://github.com/mx-space" target="_blank" rel="noopener" data-v-623b6953 data-v-c50d0b43><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-503f7c40 data-v-82ddeea3><span class="container" data-v-82ddeea3><span class="top" data-v-82ddeea3></span><span class="middle" data-v-82ddeea3></span><span class="bottom" data-v-82ddeea3></span></span></button></div></div></div><!----></header><div class="VPLocalNav" data-v-c2a530d9 data-v-8ade421c><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-8ade421c><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="menu-icon" data-v-8ade421c><path d="M17,11H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h14c0.6,0,1,0.4,1,1S17.6,11,17,11z"></path><path d="M21,7H3C2.4,7,2,6.6,2,6s0.4-1,1-1h18c0.6,0,1,0.4,1,1S21.6,7,21,7z"></path><path d="M21,15H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h18c0.6,0,1,0.4,1,1S21.6,15,21,15z"></path><path d="M17,19H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h14c0.6,0,1,0.4,1,1S17.6,19,17,19z"></path></svg><span class="menu-text" data-v-8ade421c>Menu</span></button><a class="top-link" href="#" data-v-8ade421c> Return to top </a></div><aside class="VPSidebar" data-v-c2a530d9 data-v-e2e50610><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-e2e50610><span class="visually-hidden" id="sidebar-aria-label" data-v-e2e50610> Sidebar Navigation </span><!--[--><div class="group" data-v-e2e50610><section class="VPSidebarGroup" data-v-e2e50610 data-v-3a393915><div class="title" data-v-3a393915><h2 class="title-text" data-v-3a393915>介绍</h2><div class="action" data-v-3a393915><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 24 24" class="icon minus" data-v-3a393915><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2zM20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h8c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon plus" data-v-3a393915><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2z M20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11h-3V8c0-0.6-0.4-1-1-1s-1,0.4-1,1v3H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h3v3c0,0.6,0.4,1,1,1s1-0.4,1-1v-3h3c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg></div></div><div class="items" data-v-3a393915><!--[--><a class="VPLink link link" href="/guide/" data-v-3a393915 data-v-257c3e0f data-v-eb60ede3><!--[--><span class="link-text" data-v-257c3e0f>介绍</span><!----><!--]--><!----></a><!--]--></div></section></div><div class="group" data-v-e2e50610><section class="VPSidebarGroup" data-v-e2e50610 data-v-3a393915><div class="title" data-v-3a393915><h2 class="title-text" data-v-3a393915>部署</h2><div class="action" data-v-3a393915><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 24 24" class="icon minus" data-v-3a393915><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2zM20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h8c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon plus" data-v-3a393915><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2z M20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11h-3V8c0-0.6-0.4-1-1-1s-1,0.4-1,1v3H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h3v3c0,0.6,0.4,1,1,1s1-0.4,1-1v-3h3c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg></div></div><div class="items" data-v-3a393915><!--[--><a class="VPLink link link" href="/deploy/index.html#%E9%83%A8%E7%BD%B2%E7%B3%BB%E7%BB%9F" data-v-3a393915 data-v-257c3e0f data-v-eb60ede3><!--[--><span class="link-text" data-v-257c3e0f>Docker 一键部署</span><!----><!--]--><!----></a><a class="VPLink link link" href="/deploy/index.html#%E6%89%8B%E5%8A%A8%E9%83%A8%E7%BD%B2" data-v-3a393915 data-v-257c3e0f data-v-eb60ede3><!--[--><span class="link-text" data-v-257c3e0f>部署 Core</span><!----><!--]--><!----></a><a class="VPLink link link" href="/deploy/index.html#%E9%83%A8%E7%BD%B2-kami" data-v-3a393915 data-v-257c3e0f data-v-eb60ede3><!--[--><span class="link-text" data-v-257c3e0f>部署 Kami</span><!----><!--]--><!----></a><a class="VPLink link link" href="/deploy/" data-v-3a393915 data-v-257c3e0f data-v-eb60ede3><!--[--><span class="link-text" data-v-257c3e0f>部署 Yun (WIP)</span><!----><!--]--><!----></a><!--]--></div></section></div><div class="group" data-v-e2e50610><section class="VPSidebarGroup" data-v-e2e50610 data-v-3a393915><div class="title" data-v-3a393915><h2 class="title-text" data-v-3a393915>使用</h2><div class="action" data-v-3a393915><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 24 24" class="icon minus" data-v-3a393915><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2zM20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h8c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon plus" data-v-3a393915><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2z M20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11h-3V8c0-0.6-0.4-1-1-1s-1,0.4-1,1v3H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h3v3c0,0.6,0.4,1,1,1s1-0.4,1-1v-3h3c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg></div></div><div class="items" data-v-3a393915><!--[--><a class="VPLink link link" href="/use/" data-v-3a393915 data-v-257c3e0f data-v-eb60ede3><!--[--><span class="link-text" data-v-257c3e0f>使用</span><!----><!--]--><!----></a><a class="VPLink link link" href="/use/#后台设置" data-v-3a393915 data-v-257c3e0f data-v-eb60ede3><!--[--><span class="link-text" data-v-257c3e0f>后台设置</span><!----><!--]--><!----></a><a class="VPLink link link" href="/use/#歌单听歌追番" data-v-3a393915 data-v-257c3e0f data-v-eb60ede3><!--[--><span class="link-text" data-v-257c3e0f>歌单</span><!----><!--]--><!----></a><!--]--></div></section></div><div class="group" data-v-e2e50610><section class="VPSidebarGroup" data-v-e2e50610 data-v-3a393915><div class="title" data-v-3a393915><h2 class="title-text" data-v-3a393915>帮助</h2><div class="action" data-v-3a393915><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 24 24" class="icon minus" data-v-3a393915><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2zM20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h8c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon plus" data-v-3a393915><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2z M20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11h-3V8c0-0.6-0.4-1-1-1s-1,0.4-1,1v3H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h3v3c0,0.6,0.4,1,1,1s1-0.4,1-1v-3h3c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg></div></div><div class="items" data-v-3a393915><!--[--><a class="VPLink link link" href="/help/#构建" data-v-3a393915 data-v-257c3e0f data-v-eb60ede3><!--[--><span class="link-text" data-v-257c3e0f>构建</span><!----><!--]--><!----></a><a class="VPLink link link" href="/help/#设置" data-v-3a393915 data-v-257c3e0f data-v-eb60ede3><!--[--><span class="link-text" data-v-257c3e0f>设置</span><!----><!--]--><!----></a><a class="VPLink link link" href="/help/#重启" data-v-3a393915 data-v-257c3e0f data-v-eb60ede3><!--[--><span class="link-text" data-v-257c3e0f>重启</span><!----><!--]--><!----></a><a class="VPLink link link" href="/help/#升级" data-v-3a393915 data-v-257c3e0f data-v-eb60ede3><!--[--><span class="link-text" data-v-257c3e0f>升级</span><!----><!--]--><!----></a><!--]--></div></section></div><div class="group" data-v-e2e50610><section class="VPSidebarGroup" data-v-e2e50610 data-v-3a393915><div class="title" data-v-3a393915><h2 class="title-text" data-v-3a393915>实验性特征</h2><div class="action" data-v-3a393915><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 24 24" class="icon minus" data-v-3a393915><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2zM20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h8c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon plus" data-v-3a393915><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2z M20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11h-3V8c0-0.6-0.4-1-1-1s-1,0.4-1,1v3H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h3v3c0,0.6,0.4,1,1,1s1-0.4,1-1v-3h3c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg></div></div><div class="items" data-v-3a393915><!--[--><a class="VPLink link link" href="/feature/text-macors.html" data-v-3a393915 data-v-257c3e0f data-v-eb60ede3><!--[--><span class="link-text" data-v-257c3e0f>文本宏</span><!----><!--]--><!----></a><a class="VPLink link link" href="/feature/serverless-functions.html" data-v-3a393915 data-v-257c3e0f data-v-eb60ede3><!--[--><span class="link-text" data-v-257c3e0f>云函数</span><!----><!--]--><!----></a><!--]--></div></section></div><div class="group" data-v-e2e50610><section class="VPSidebarGroup" data-v-e2e50610 data-v-3a393915><div class="title" data-v-3a393915><h2 class="title-text" data-v-3a393915>开发</h2><div class="action" data-v-3a393915><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 24 24" class="icon minus" data-v-3a393915><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2zM20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h8c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon plus" data-v-3a393915><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2z M20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11h-3V8c0-0.6-0.4-1-1-1s-1,0.4-1,1v3H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h3v3c0,0.6,0.4,1,1,1s1-0.4,1-1v-3h3c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg></div></div><div class="items" data-v-3a393915><!--[--><a class="VPLink link link" href="/dev/frontend.html" data-v-3a393915 data-v-257c3e0f data-v-eb60ede3><!--[--><span class="link-text" data-v-257c3e0f>前端</span><!----><!--]--><!----></a><a class="VPLink link link active" href="/dev/server.html" data-v-3a393915 data-v-257c3e0f data-v-eb60ede3><!--[--><span class="link-text" data-v-257c3e0f>服务端</span><!----><!--]--><!----></a><!--]--></div></section></div><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-c2a530d9 data-v-f1cd9e02><div class="VPDoc has-sidebar has-aside" data-v-f1cd9e02 data-v-42d1b73e><div class="container" data-v-42d1b73e><div class="aside" data-v-42d1b73e><div class="aside-curtain" data-v-42d1b73e></div><div class="aside-container" data-v-42d1b73e><div class="aside-content" data-v-42d1b73e><div class="VPDocAside" data-v-42d1b73e data-v-d93c60ca><!--[--><!--]--><!--[--><!--]--><div class="VPDocAsideOutline has-outline" data-v-d93c60ca data-v-1ebaa841><div class="content" data-v-1ebaa841><div class="outline-marker" data-v-1ebaa841></div><div class="outline-title" data-v-1ebaa841>On this page</div><nav aria-labelledby="doc-outline-aria-label" data-v-1ebaa841><span class="visually-hidden" id="doc-outline-aria-label" data-v-1ebaa841> Table of Contents for current page </span><ul class="root" data-v-1ebaa841><!--[--><li style="" data-v-1ebaa841><a class="outline-link" href="#项目结构" data-v-1ebaa841>项目结构</a><!----></li><li style="" data-v-1ebaa841><a class="outline-link" href="#应用结构" data-v-1ebaa841>应用结构</a><!----></li><li style="" data-v-1ebaa841><a class="outline-link" href="#开发" data-v-1ebaa841>开发</a><!----></li><li style="" data-v-1ebaa841><a class="outline-link" href="#reference" data-v-1ebaa841>Reference</a><!----></li><!--]--></ul></nav></div></div><!--[--><!--]--><div class="spacer" data-v-d93c60ca></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-42d1b73e><div class="content-container" data-v-42d1b73e><!--[--><!--]--><main class="main" data-v-42d1b73e><div style="position:relative;" class="vp-doc _dev_server" data-v-42d1b73e><div><h1 id="mserver-next-v3" tabindex="-1">MServer Next (v3) <a class="header-anchor" href="#mserver-next-v3" aria-hidden="true">#</a></h1><blockquote><p><strong>适用于 Mix Space 的 RESTful API &amp; GraphQL 服务端应用；基于 <a href="https://github.com/nestjs/nest" target="_blank" rel="noreferrer"><code>nestjs</code></a> (nodejs)，需安装 <a href="https://www.mongodb.com/" target="_blank" rel="noreferrer"><code>MongoDB</code></a> 和 <a href="https://redis.io/" target="_blank" rel="noreferrer"><code>Redis</code></a> 方可完整运行。</strong></p></blockquote><blockquote><p>v3 还是使用 <a href="https://github.com/nestjs/nest" target="_blank" rel="noreferrer"><code>nestjs</code></a> 进行重构，之前的版本在 <a href="https://github.com/mx-space/server" target="_blank" rel="noreferrer">此仓库</a>。</p></blockquote><p>配合相关项目一起使用:</p><ul><li><strong>SSR Blog</strong>: <ul><li><a href="https://github.com/mx-space/kami" target="_blank" rel="noreferrer">Kami</a> powered by NextJS (一个走可爱风路线的个人空间)</li><li>未来会变多吗</li></ul></li><li><strong>Admin</strong>: <a href="https://github.com/mx-space/admin-next" target="_blank" rel="noreferrer">Admin</a></li><li>未来可期</li></ul><p>接口文档通过开发环境 Swagger 查阅，接口大概有 120+ 个</p><h2 id="项目结构" tabindex="-1">项目结构 <a class="header-anchor" href="#项目结构" aria-hidden="true">#</a></h2><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">.</span></span>
<span class="line"><span style="color:#A6ACCD;">├── app.config.ts                 # 主程序配置，数据库、程序、第三方，一切可配置项</span></span>
<span class="line"><span style="color:#A6ACCD;">├── app.controller.ts             # 主程序根控制器</span></span>
<span class="line"><span style="color:#A6ACCD;">├── app.module.ts                 # 主程序根模块，负责各业务模块的聚合</span></span>
<span class="line"><span style="color:#A6ACCD;">├── app.resolver.ts               # 主程序根 GraphQL Resolver</span></span>
<span class="line"><span style="color:#A6ACCD;">├── common                        # 存放中间件</span></span>
<span class="line"><span style="color:#A6ACCD;">│   ├── adapt                     # Fastify 适配器的配置</span></span>
<span class="line"><span style="color:#A6ACCD;">│   ├── decorator                 # 业务装饰器</span></span>
<span class="line"><span style="color:#A6ACCD;">│   ├── exceptions                # 自定义异常</span></span>
<span class="line"><span style="color:#A6ACCD;">│   ├── filters                   # 异常处理器</span></span>
<span class="line"><span style="color:#A6ACCD;">│   ├── guard                     # 守卫与鉴权</span></span>
<span class="line"><span style="color:#A6ACCD;">│   ├── interceptors              # 拦截器, 数据过滤与响应格式化处理</span></span>
<span class="line"><span style="color:#A6ACCD;">│   ├── middlewares               # 传统意义上的中间件</span></span>
<span class="line"><span style="color:#A6ACCD;">│   └── pipes                     # 管道</span></span>
<span class="line"><span style="color:#A6ACCD;">├── constants                     # 常量</span></span>
<span class="line"><span style="color:#A6ACCD;">│   ├── article.constant.ts</span></span>
<span class="line"><span style="color:#A6ACCD;">│   ├── cache.constant.ts</span></span>
<span class="line"><span style="color:#A6ACCD;">│   ├── meta.constant.ts</span></span>
<span class="line"><span style="color:#A6ACCD;">│   ├── path.constant.ts</span></span>
<span class="line"><span style="color:#A6ACCD;">│   └── system.constant.ts</span></span>
<span class="line"><span style="color:#A6ACCD;">├── main.ts                       # 引入配置，启动主程序，引入各种全局服务</span></span>
<span class="line"><span style="color:#A6ACCD;">├── modules                       # 业务逻辑模块</span></span>
<span class="line"><span style="color:#A6ACCD;">│   ├── aggregate</span></span>
<span class="line"><span style="color:#A6ACCD;">│   ├── analyze</span></span>
<span class="line"><span style="color:#A6ACCD;">│   ├── auth</span></span>
<span class="line"><span style="color:#A6ACCD;">│   ├── backup</span></span>
<span class="line"><span style="color:#A6ACCD;">│   ├── category</span></span>
<span class="line"><span style="color:#A6ACCD;">│   ├── comment</span></span>
<span class="line"><span style="color:#A6ACCD;">│   ├── configs</span></span>
<span class="line"><span style="color:#A6ACCD;">│   ├── feed</span></span>
<span class="line"><span style="color:#A6ACCD;">│   ├── health</span></span>
<span class="line"><span style="color:#A6ACCD;">│   ├── init</span></span>
<span class="line"><span style="color:#A6ACCD;">│   ├── link</span></span>
<span class="line"><span style="color:#A6ACCD;">│   ├── markdown</span></span>
<span class="line"><span style="color:#A6ACCD;">│   ├── note</span></span>
<span class="line"><span style="color:#A6ACCD;">│   ├── option</span></span>
<span class="line"><span style="color:#A6ACCD;">│   ├── page</span></span>
<span class="line"><span style="color:#A6ACCD;">│   ├── pageproxy</span></span>
<span class="line"><span style="color:#A6ACCD;">│   ├── post</span></span>
<span class="line"><span style="color:#A6ACCD;">│   ├── project</span></span>
<span class="line"><span style="color:#A6ACCD;">│   ├── recently</span></span>
<span class="line"><span style="color:#A6ACCD;">│   ├── say</span></span>
<span class="line"><span style="color:#A6ACCD;">│   ├── search</span></span>
<span class="line"><span style="color:#A6ACCD;">│   ├── sitemap</span></span>
<span class="line"><span style="color:#A6ACCD;">│   ├── tool</span></span>
<span class="line"><span style="color:#A6ACCD;">│   └── user</span></span>
<span class="line"><span style="color:#A6ACCD;">├── processors                      # 核心辅助模块</span></span>
<span class="line"><span style="color:#A6ACCD;">│   ├── cache                       # Redis 缓存相关</span></span>
<span class="line"><span style="color:#A6ACCD;">│   ├── database                    # Mongo 数据库相关</span></span>
<span class="line"><span style="color:#A6ACCD;">│   ├── gateway                     # Socket.IO 相关</span></span>
<span class="line"><span style="color:#A6ACCD;">│   ├── helper                      # 辅助类</span></span>
<span class="line"><span style="color:#A6ACCD;">│   └── logger                      # 自定义 Logger</span></span>
<span class="line"><span style="color:#A6ACCD;">├── shared                          # 通用模型</span></span>
<span class="line"><span style="color:#A6ACCD;">│   ├── dto                         # 数据验证模型</span></span>
<span class="line"><span style="color:#A6ACCD;">│   ├── interface                   # 接口</span></span>
<span class="line"><span style="color:#A6ACCD;">│   └── model                       # 基本数据模型</span></span>
<span class="line"><span style="color:#A6ACCD;">├── utils                           # 工具类</span></span>
<span class="line"><span style="color:#A6ACCD;">│   ├── crud.util.ts</span></span>
<span class="line"><span style="color:#A6ACCD;">│   ├── dayjs.util.ts</span></span>
<span class="line"><span style="color:#A6ACCD;">│   ├── global.util.ts</span></span>
<span class="line"><span style="color:#A6ACCD;">│   ├── index.util.ts</span></span>
<span class="line"><span style="color:#A6ACCD;">│   ├── ip.util.ts</span></span>
<span class="line"><span style="color:#A6ACCD;">│   ├── nest.util.ts</span></span>
<span class="line"><span style="color:#A6ACCD;">│   ├── pic.util.ts</span></span>
<span class="line"><span style="color:#A6ACCD;">│   ├── query.util.ts</span></span>
<span class="line"><span style="color:#A6ACCD;">│   ├── redis.util.ts</span></span>
<span class="line"><span style="color:#A6ACCD;">│   ├── system.util.ts</span></span>
<span class="line"><span style="color:#A6ACCD;">│   ├── time.util.ts</span></span>
<span class="line"><span style="color:#A6ACCD;">│   ├── transfrom.util.ts</span></span>
<span class="line"><span style="color:#A6ACCD;">│   └── validator</span></span>
<span class="line"><span style="color:#A6ACCD;">└── zx.global.ts</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><h2 id="应用结构" tabindex="-1">应用结构 <a class="header-anchor" href="#应用结构" aria-hidden="true">#</a></h2><ul><li><p>请求处理流程</p><ol><li>request：收到请求</li><li>middleware：中间件过滤爬虫 PHP 肉鸡扫描路径，记录访问历史</li><li>guard：守卫过滤（鉴权）和角色附加</li><li>interceptor:before：只用于 DEBUG 请求计时</li><li>pipe：校验请求数据，过滤未知数据，非法类型抛错 422</li><li>controller &amp; resolver：业务控制器</li><li>service：业务服务</li><li>interceptor:after：数据流拦截器（格式化数据）、请求缓存</li><li>filter：捕获以上所有流程中出现的异常，如果任何一个环节抛出异常，则返回错误</li></ol></li><li><p>拦截器流向</p></li></ul><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">ResponseInterceptor -&gt; JSONSerializeInterceptor -&gt; CountingInterceptor -&gt; HttpCacheInterceptor</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><ul><li><p><a href="https://github.com/mx-space/server-next/tree/master/src/modules" target="_blank" rel="noreferrer">业务逻辑模块</a></p><ol><li>[Aggregate] 聚合</li><li>[Analyze] 数据统计</li><li>[Auth] 认证</li><li>[Backup] 备份</li><li>[Category] 分类</li><li>[Commnet] 评论</li><li>[Configs] 读取配置项</li><li>[Feed] RSS</li><li>[Health] 应用健康检查与日志相关</li><li>[Init] 初始化相关</li><li>[Link] 友链</li><li>[Markdown] Markdown 解析导入导出解析相关</li><li>[Note] 日记</li><li>[Option] 设置</li><li>[Page] 独立页面</li><li>[PageProxy] 反代管理页</li><li>[Post] 博文</li><li>[Project] 项目</li><li>[Recently] 最近</li><li>[Say] 说说</li><li>[Search] 搜索</li><li>[Sitemap] 站点地图</li><li>[Tool] 工具接口</li><li>[User] 用户</li></ol></li><li><p><a href="https://github.com/mx-space/server-next/tree/master/src/processors" target="_blank" rel="noreferrer">核心辅助模块 processors</a></p><ol><li>[cache] Redis 缓存相关</li><li>[database] 数据库相关</li><li>[gateway] <a href="http://Socket.IO" target="_blank" rel="noreferrer">Socket.IO</a> 相关 <ul><li>用户端</li><li>管理端</li><li>实时通知</li></ul></li><li>[helper] 辅助类</li><li>[CountingService] 提供更新阅读计数</li><li>[CronService] 维护管理计划任务 <ul><li>自动备份</li><li>推送百度搜索</li><li>清除缓存</li><li>etc.</li></ul></li><li>[EmailService] 送信服务</li><li>[HttpService] 请求模块</li><li>[ImageService] 图片处理</li><li>[TqService] 任务队列</li><li>[UploadService] 上传服务</li><li>[AssetService] 获取本地资源服务</li></ol></li></ul><h2 id="开发" tabindex="-1">开发 <a class="header-anchor" href="#开发" aria-hidden="true">#</a></h2><p>安装好 <code>redis</code> 、<code>mongodb</code></p><p>克隆仓库</p><div class="language-bash"><button class="copy"></button><span class="lang">bash</span><pre><code><span class="line"><span style="color:#A6ACCD;">git clone https://github.com/mx-space/server-next.git --depth 1 server</span></span>
<span class="line"></span></code></pre></div><p>更换到稳定分支</p><div class="language-bash"><button class="copy"></button><span class="lang">bash</span><pre><code><span class="line"><span style="color:#82AAFF;">cd</span><span style="color:#A6ACCD;"> server </span><span style="color:#89DDFF;">&amp;&amp;</span><span style="color:#A6ACCD;"> git fetch --tags </span><span style="color:#89DDFF;">&amp;&amp;</span><span style="color:#A6ACCD;"> git checkout </span><span style="color:#89DDFF;">$(</span><span style="color:#C3E88D;">git rev-list --tags --max-count=1</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&amp;&amp;</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">cd</span><span style="color:#A6ACCD;"> ..</span></span>
<span class="line"></span></code></pre></div><p>构建，启动 server</p><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">pnpm i</span></span>
<span class="line"><span style="color:#A6ACCD;">pnpm start</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><h3 id="api-接口" tabindex="-1">API 接口 <a class="header-anchor" href="#api-接口" aria-hidden="true">#</a></h3><p>浏览器访问 <a href="http://127.0.0.1/api-docs" target="_blank" rel="noreferrer">http://127.0.0.1/api-docs</a> 可以看到 Server 提供的 API 接口。</p><p>你还可以对每一个接口进行测试。</p><h3 id="图形化查询" tabindex="-1">图形化查询 <a class="header-anchor" href="#图形化查询" aria-hidden="true">#</a></h3><p><a href="http://127.0.0.1/graphql" target="_blank" rel="noreferrer">http://127.0.0.1/graphql</a></p><h2 id="reference" tabindex="-1">Reference <a class="header-anchor" href="#reference" aria-hidden="true">#</a></h2><p>项目参考了 <a href="https://github.com/surmon-china/nodepress" target="_blank" rel="noreferrer">nodepress</a></p></div></div></main><!--[--><!--]--><footer class="VPDocFooter" data-v-42d1b73e data-v-c281d063><div class="edit-info" data-v-c281d063><div class="edit-link" data-v-c281d063><a class="VPLink link edit-link-button" href="https://github.com/mx-space/docs/edit/main/docs/dev/server.md" target="_blank" rel="noreferrer" data-v-c281d063 data-v-eb60ede3><!--[--><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="edit-link-icon" data-v-c281d063><path d="M18,23H4c-1.7,0-3-1.3-3-3V6c0-1.7,1.3-3,3-3h7c0.6,0,1,0.4,1,1s-0.4,1-1,1H4C3.4,5,3,5.4,3,6v14c0,0.6,0.4,1,1,1h14c0.6,0,1-0.4,1-1v-7c0-0.6,0.4-1,1-1s1,0.4,1,1v7C21,21.7,19.7,23,18,23z"></path><path d="M8,17c-0.3,0-0.5-0.1-0.7-0.3C7,16.5,6.9,16.1,7,15.8l1-4c0-0.2,0.1-0.3,0.3-0.5l9.5-9.5c1.2-1.2,3.2-1.2,4.4,0c1.2,1.2,1.2,3.2,0,4.4l-9.5,9.5c-0.1,0.1-0.3,0.2-0.5,0.3l-4,1C8.2,17,8.1,17,8,17zM9.9,12.5l-0.5,2.1l2.1-0.5l9.3-9.3c0.4-0.4,0.4-1.1,0-1.6c-0.4-0.4-1.2-0.4-1.6,0l0,0L9.9,12.5z M18.5,2.5L18.5,2.5L18.5,2.5z"></path></svg> 编辑此页<!--]--><!----></a></div><!----></div><div class="prev-next" data-v-c281d063><div class="pager" data-v-c281d063><a class="pager-link prev" href="/dev/frontend.html" data-v-c281d063><span class="desc" data-v-c281d063>Previous page</span><span class="title" data-v-c281d063>前端</span></a></div><div class="has-prev pager" data-v-c281d063><!----></div></div></footer><!--[--><!--]--></div></div></div></div></div><footer class="VPFooter has-sidebar" data-v-c2a530d9 data-v-bdd3a57b><div class="container" data-v-bdd3a57b><!----><p class="copyright" data-v-bdd3a57b>Copyright © 2020-2022 Innei</p></div></footer><!--[--><!--]--></div></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"deploy_index.md\":\"b142baf7\",\"dev_frontend.md\":\"8bab5603\",\"dev_index.md\":\"f17dfc46\",\"dev_server.md\":\"eac0daca\",\"feature_serverless-functions.md\":\"7b39f144\",\"feature_text-macors.md\":\"6e54c06e\",\"guide_index.md\":\"8cdf291f\",\"help_index.md\":\"57507d78\",\"index.md\":\"3e2af04c\",\"use_index.md\":\"ceded2bd\"}")</script>
    <script type="module" async src="/assets/app.553a9922.js"></script>
    
  </body>
</html>